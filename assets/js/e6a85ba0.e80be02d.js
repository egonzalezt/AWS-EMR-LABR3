"use strict";(self.webpackChunkaws_emr_labr_3=self.webpackChunkaws_emr_labr_3||[]).push([[642],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return m}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),l=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=l(e.components);return n.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=l(a),m=r,g=d["".concat(i,".").concat(m)]||d[m]||p[m]||s;return a?n.createElement(g,o(o({ref:t},u),{},{components:a})):n.createElement(g,o({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=a.length,o=new Array(s);o[0]=d;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var l=2;l<s;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},375:function(e,t,a){a.r(t),a.d(t,{assets:function(){return u},contentTitle:function(){return i},default:function(){return m},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return p}});var n=a(7462),r=a(3366),s=(a(7294),a(3905)),o=["components"],c={},i="S3",l={unversionedId:"Lab1-hdfs-s3/S3/README",id:"Lab1-hdfs-s3/S3/README",title:"S3",description:"Using Apache Hue",source:"@site/docs/Lab1-hdfs-s3/S3/README.md",sourceDirName:"Lab1-hdfs-s3/S3",slug:"/Lab1-hdfs-s3/S3/",permalink:"/AWS-EMR-LABR3/docs/Lab1-hdfs-s3/S3/",draft:!1,editUrl:"https://github.com/egonzalezt/AWS-EMR-LABR3/tree/main/docs/Lab1-hdfs-s3/S3/README.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"AWS S3",permalink:"/AWS-EMR-LABR3/docs/category/aws-s3"},next:{title:"AWS-EMR-LABR3-ST0263",permalink:"/AWS-EMR-LABR3/docs/SetupEMR/intro"}},u={},p=[{value:"Using Apache Hue",id:"using-apache-hue",level:2},{value:"Go to S3",id:"go-to-s3",level:3},{value:"Create dir",id:"create-dir",level:3},{value:"Upload datasets",id:"upload-datasets",level:3},{value:"Using HDFS CLI",id:"using-hdfs-cli",level:2},{value:"Before start",id:"before-start",level:3},{value:"Upload to AWS S3",id:"upload-to-aws-s3",level:3},{value:"Example",id:"example",level:4},{value:"Final result",id:"final-result",level:3},{value:"Make Bucket public <code>ready-only</code>",id:"make-bucket-public-ready-only",level:2},{value:"Go to your bucket",id:"go-to-your-bucket",level:3},{value:"Go to permissions",id:"go-to-permissions",level:3},{value:"Go to Bucket policy",id:"go-to-bucket-policy",level:3},{value:"Give public access to your bucket",id:"give-public-access-to-your-bucket",level:3},{value:"Final result",id:"final-result-1",level:3},{value:"S3 URLS",id:"s3-urls",level:3},{value:"Demo",id:"demo",level:4},{value:"Hadoop Datasets",id:"hadoop-datasets",level:5}],d={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,o);return(0,s.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"s3"},"S3"),(0,s.kt)("h2",{id:"using-apache-hue"},"Using Apache Hue"),(0,s.kt)("h3",{id:"go-to-s3"},"Go to S3"),(0,s.kt)("p",null,"Search S3 option on Hue dashboard"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836383-548567c9-d7c3-4eb0-9dc1-9b6faa9f63e3.png",alt:"image"})),(0,s.kt)("h3",{id:"create-dir"},"Create dir"),(0,s.kt)("p",null,"Go to your AWS S3 bucket and create dir ",(0,s.kt)("inlineCode",{parentName:"p"},"/datasets/onu")),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836426-b2f03952-a597-442c-92de-68a36b3a8bbe.png",alt:"image"})),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836432-b92349ea-f4f8-48f6-8fce-6bee489d8cb2.png",alt:"image"}),"\n",(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836438-a0991c84-c181-4c73-8864-dbe25de19063.png",alt:"image"}),"\n",(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836450-8569e453-c6ee-446d-b235-d2b4e99aa070.png",alt:"image"})),(0,s.kt)("h3",{id:"upload-datasets"},"Upload datasets"),(0,s.kt)("p",null,"using ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/ST0263/st0263-2022-1/tree/main/Big%20Data/datasets"},"datasets")," upload datasets ",(0,s.kt)("inlineCode",{parentName:"p"},"export-data.csv")," and ",(0,s.kt)("inlineCode",{parentName:"p"},"hdi-data.csv")),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836473-7f22061f-94f9-4682-9356-61cd25a1732e.png",alt:"image"})),(0,s.kt)("h2",{id:"using-hdfs-cli"},"Using HDFS CLI"),(0,s.kt)("h3",{id:"before-start"},"Before start"),(0,s.kt)("p",null,"You need to do ",(0,s.kt)("a",{parentName:"p",href:"https://github.com/egonzalezt/AWS-EMR-LABR3/blob/3f193bcecc81c833f2ed70514a10c0a8611e009d/docs/Lab1-hdfs-s3/HDFS/README.md"},"HDFS")),(0,s.kt)("h3",{id:"upload-to-aws-s3"},"Upload to AWS S3"),(0,s.kt)("p",null,"Hadoop uses a user command interface on your EMR master machine that you can use to upload all your datasets located on your HDFS to your S3 Bucket.\n",(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836631-fc954d88-6321-4214-863c-1ce706e80beb.png",alt:"image"})),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-powershell"},"hadoop distcp hdfs://source_directory/Files s3a://destination_directory\n")),(0,s.kt)("h4",{id:"example"},"Example"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-powershell"},"hadoop distcp hdfs:/user/hadoop/datasets s3a://davesnotebooks/datasetshadoop\n")),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836668-64dfd31d-ce85-4bc9-a86f-66507ab290cf.png",alt:"image"})),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836676-58fc87d6-8067-4e7c-81f3-1bbdefabc831.png",alt:"image"})),(0,s.kt)("h3",{id:"final-result"},"Final result"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836690-b20f50ae-8138-4ad4-8d93-fd095d581957.png",alt:"image"})),(0,s.kt)("h2",{id:"make-bucket-public-ready-only"},"Make Bucket public ",(0,s.kt)("inlineCode",{parentName:"h2"},"ready-only")),(0,s.kt)("p",null,"Information provided by ",(0,s.kt)("a",{parentName:"p",href:"https://aws.amazon.com/premiumsupport/knowledge-center/read-access-objects-s3-bucket/"},"AWS")),(0,s.kt)("h3",{id:"go-to-your-bucket"},"Go to your bucket"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836774-0b309e43-8ad8-4344-95e7-231cecdbd737.png",alt:"image"})),(0,s.kt)("h3",{id:"go-to-permissions"},"Go to permissions"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836798-349a929f-4477-4511-9f2f-f2fa8f903e30.png",alt:"image"})),(0,s.kt)("p",null,"Edit Block public access (bucket settings) and remove Block all public access option"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836880-c4ad1c55-3810-45ed-b8c7-d79aacc93147.png",alt:"image"}),"\n",(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836903-ce597cd8-f4f6-4c89-a478-fc73056bddb5.png",alt:"image"})),(0,s.kt)("h3",{id:"go-to-bucket-policy"},"Go to Bucket policy"),(0,s.kt)("p",null," Edit the bucket policy\n",(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836922-95706cce-1b99-48ec-bc00-5f788a29e698.png",alt:"image"})),(0,s.kt)("h3",{id:"give-public-access-to-your-bucket"},"Give public access to your bucket"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170836950-6eb4f331-ebee-40e5-bae0-667efee48cb5.png",alt:"image"})),(0,s.kt)("p",null,"Add your policy rule and save config"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Sid": "PublicAccess",\n            "Principal": "*",\n            "Effect": "Allow",\n            "Action":["s3:GetObject"],\n            "Resource":["arn:aws:s3:::davesnotebooks/*"]\n        }\n    ]\n}\n')),(0,s.kt)("h3",{id:"final-result-1"},"Final result"),(0,s.kt)("h3",{id:"s3-urls"},"S3 URLS"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://davesnotebooks.s3.us-east-1.amazonaws.com/datasets/"},"Datasets")),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"https://davesnotebooks.s3.us-east-1.amazonaws.com/datasetshadoop/"},"HadoopDatasets"))),(0,s.kt)("h4",{id:"demo"},"Demo"),(0,s.kt)("p",null,"Select one file and select copy url"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170837055-fbfd289d-249a-4533-843a-4687ab920df5.png",alt:"image"})),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170837068-674489f1-bc45-4720-b175-2b06453f1362.png",alt:"image"})),(0,s.kt)("p",null,"On this case url was search un incoginito mode to check if already has public access"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170837075-26d51abf-d712-4c69-8920-3e12cd23d08c.png",alt:"image"})),(0,s.kt)("h5",{id:"hadoop-datasets"},"Hadoop Datasets"),(0,s.kt)("p",null,(0,s.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/53051438/170837175-6550c790-5f19-4903-b9c4-3d007d43396a.png",alt:"image"})))}m.isMDXComponent=!0}}]);